% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/stability.R
\name{stability}
\alias{stability}
\title{Compute Variable Stability Through Resampling}
\usage{
stability(
  X,
  y,
  family = c("gaussian", "binomial"),
  B = 50,
  resample_type = c("bootstrap", "subsample"),
  m = NULL,
  K = NULL,
  eps = 1e-06,
  delta = 1,
  L = 50,
  verbose = FALSE,
  parallel = FALSE,
  ncores = 2
)
}
\arguments{
\item{X}{Matrix or data frame of predictors (n x p)}

\item{y}{Response vector (length n)}

\item{family}{Character string: "gaussian" or "binomial"}

\item{B}{Integer: number of resamples. Default: 50}

\item{resample_type}{Character: "bootstrap" (sample with replacement) or
"subsample" (sample without replacement). Default: "bootstrap"}

\item{m}{Integer: subsample size if resample_type = "subsample".
Default: ceiling(sqrt(n))}

\item{K}{Integer: maximum steps for build_paths(). Default: NULL (uses build_paths default)}

\item{eps}{Numeric: minimum AIC improvement. Default: 1e-6}

\item{delta}{Numeric: AIC tolerance for near-ties. Default: 1}

\item{L}{Integer: max models per step. Default: 50}

\item{verbose}{Logical: print progress? Default: FALSE}

\item{parallel}{Logical: use parallel processing? Default: FALSE}

\item{ncores}{Integer: number of cores if parallel = TRUE. Default: 2}
}
\value{
A list with components:
\item{pi}{Named numeric vector of stability scores (length p)}
\item{z_matrix}{Matrix of per-resample proportions (B x p)}
\item{meta}{Metadata including parameters and variable names}
}
\description{
This function estimates the stability of predictor selection by repeating the
multi-path search on resampled versions of the data. For each resample, it
computes the proportion of models that include each variable. These proportions
are then averaged across all resamples to produce stability scores.
}
\details{
The algorithm works as follows:
\enumerate{
\item For b = 1 to B:
\itemize{
\item Draw a bootstrap sample or subsample of the data
\item Run build_paths() on that resample
\item For each predictor j, compute z_j^(b) = proportion of models containing j
}
\item Compute stability scores: pi_j = (1/B) * Sum_b z_j^(b)
}

A stability score close to 1 means the variable is almost always selected;
a score near 0 means it's rarely used.
}
\examples{
\dontrun{
# Example with simulated data
set.seed(123)
n <- 100
p <- 5
X <- matrix(rnorm(n * p), n, p)
colnames(X) <- paste0("x", 1:p)
y <- X[,1] + 0.5 * X[,2] + rnorm(n)

# Compute stability
stab <- stability(X, y, family = "gaussian", B = 20, verbose = TRUE)
print(stab$pi)
}
}
